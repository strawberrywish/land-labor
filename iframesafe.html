<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Horizontal + Vertical Scroll (Iframe Safe)</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:"Oswald",sans-serif; overflow:hidden; }

/* Internal scroll area */
#scroller {
  height:100vh;
  overflow-y:scroll;
  overflow-x:hidden;
  scroll-behavior:smooth;
}

/* Horizontal container */
#container {
  height:100vh;
  width:400%;
  display:flex;
  flex-wrap:nowrap;
}

/* Horizontal sections */
.horizontal-section {
  width:100vw;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
}

/* Vertical sections */
.vertical-section {
  width:100%;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background-color:#111;
  color:white;
}

/* Background images for horizontal sections */
.horizontal-section:nth-child(1) {
  background-image:url("https://images.pexels.com/photos/2249527/pexels-photo-2249527.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");
}
.horizontal-section:nth-child(2) {
  background-image:url("https://images.pexels.com/photos/1037995/pexels-photo-1037995.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");
}
.horizontal-section:nth-child(3) {
  background-image:url("https://images.pexels.com/photos/1517076/pexels-photo-1517076.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");
}
.horizontal-section:nth-child(4) {
  background-image:url("https://images.pexels.com/photos/1037996/pexels-photo-1037996.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1");
}

.heading {
  color:white;
  font-size:8vw;
  font-weight:300;
  letter-spacing:1vw;
  text-transform:uppercase;
  text-shadow:0 0 20px rgba(0,0,0,0.5);
}
</style>
</head>

<body>
<div id="scroller">
  
  <!-- HORIZONTAL SECTION GROUP 1 -->
  <main id="container">
    <section class="horizontal-section"><h1 class="heading">Horizontal Scroll 1</h1></section>
    <section class="horizontal-section"><h1 class="heading">H - 01</h1></section>
    <section class="horizontal-section"><h1 class="heading">H - 02</h1></section>
    <section class="horizontal-section"><h1 class="heading">H - 03</h1></section>
  </main>

  <!-- VERTICAL SECTION 1 -->
  <section class="vertical-section" style="background-color:#222;">
    <h1 class="heading" style="font-size:5vw;">Vertical Scroll A</h1>
    <p style="width:60%;text-align:center;font-size:1.5vw;line-height:1.6;">
      This vertical section flows naturally after the first horizontal group.
      It’s part of the same internal scroll container.
    </p>
  </section>

  <!-- HORIZONTAL SECTION GROUP 2 -->
  <main id="container2">
    <section class="horizontal-section"><h1 class="heading">Horizontal Scroll 2</h1></section>
    <section class="horizontal-section"><h1 class="heading">H - 04</h1></section>
    <section class="horizontal-section"><h1 class="heading">H - 05</h1></section>
  </main>

  <!-- VERTICAL SECTION 2 -->
  <section class="vertical-section" style="background-color:#333;">
    <h1 class="heading" style="font-size:5vw;">Vertical Scroll B</h1>
    <p style="width:60%;text-align:center;font-size:1.5vw;line-height:1.6;">
      This is the final vertical section — you can stack content or transitions here.
    </p>
  </section>

</div>

<script>
gsap.registerPlugin(ScrollTrigger);

// Use the internal scroller (iframe safe)
const scroller = document.querySelector("#scroller");

// Handle first horizontal group
const sections1 = gsap.utils.toArray("#container .horizontal-section");
gsap.to(sections1, {
  xPercent: -100 * (sections1.length - 1),
  ease: "none",
  scrollTrigger: {
    scroller: scroller,
    trigger: "#container",
    pin: true,
    scrub: 1,
    snap: 1 / (sections1.length - 1),
    end: () => "+=" + document.querySelector("#container").scrollWidth
  }
});

// Handle second horizontal group
const sections2 = gsap.utils.toArray("#container2 .horizontal-section");
gsap.to(sections2, {
  xPercent: -100 * (sections2.length - 1),
  ease: "none",
  scrollTrigger: {
    scroller: scroller,
    trigger: "#container2",
    pin: true,
    scrub: 1,
    snap: 1 / (sections2.length - 1),
    end: () => "+=" + document.querySelector("#container2").scrollWidth
  }
});
</script>
</body>
</html>
